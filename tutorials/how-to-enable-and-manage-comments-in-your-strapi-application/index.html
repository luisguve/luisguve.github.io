<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>How To Enable And Manage Comments In Your Strapi Application - Luis G. Villegas</title><meta name=description content="In this article we'll learn how to enable comments in a strapi application as well as displaying comments in the frontend with React"><meta name=robots content="noodp"><link rel=canonical href=https://luisguve.github.io/tutorials/how-to-enable-and-manage-comments-in-your-strapi-application/><meta name=twitter:card content="summary"><meta name=twitter:description content="In this article we'll learn how to enable comments in a strapi application as well as displaying comments in the frontend with React"><meta name=twitter:title content="How To Enable And Manage Comments In Your Strapi Application - Luis G. Villegas"><meta name=twitter:site content><meta name=twitter:creator content><meta property="og:type" content="article"><meta content="How To Enable And Manage Comments In Your Strapi Application - Luis G. Villegas" property="og:title"><meta content="In this article we'll learn how to enable comments in a strapi application as well as displaying comments in the frontend with React" property="og:description"><meta property="og:url" content="https://luisguve.github.io/tutorials/how-to-enable-and-manage-comments-in-your-strapi-application/"><meta property="og:site_name" content="Luis G. Villegas"><meta property="article:section" content="tutorial"><meta property="article:published_time" content="2022-07-29 08:48:34 +0600 +0600"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"How To Enable And Manage Comments In Your Strapi Application","genre":"tutorial","url":"https:\/\/luisguve.github.io\/tutorials\/how-to-enable-and-manage-comments-in-your-strapi-application\/","datePublished":"2022-07-29 08:48:34 \u002b0600 \u002b0600","description":"In this article we\u0027ll learn how to enable comments in a strapi application as well as displaying comments in the frontend with React","author":{"@type":"Person","name":""}}</script><link rel=stylesheet href=/sass/main.css><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css><link rel=stylesheet href=/css/custom.css></head><body><header class=site-header><nav class="navbar navbar-default"><div class=container-fluid><div class=navbar-header><button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=#bs-example-navbar-collapse-1 aria-expanded=false>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button>
<a class=navbar-brand href=https://luisguve.github.io/>Luis G. Villegas</a></div><div class="collapse navbar-collapse" id=bs-example-navbar-collapse-1><ul class="nav navbar-nav navbar-right"><li><a href=https://luisguve.github.io/pages/about/>About</a></li><li><a href=https://luisguve.github.io/pages/contact/>Contact</a></li></ul></div></div></nav></header><div class=container><div class=wrapper><div class=row><div class=col-md-8><article class=post itemscope itemtype=http://schema.org/BlogPosting><header class=post-header><h1 class=post-title itemprop="name headline">How To Enable And Manage Comments In Your Strapi Application</h1><p class=post-meta><time datetime=2022-07-29T08:48:34+06:00 itemprop=datePublished>July 29, 2022</time></p></header><div class=post-content itemprop=articleBody><h3 id=outline>Outline</h3><ul><li>Introduction</li><li>Prerequisites</li><li>What is Strapi Comment Manager?</li><li>Installation</li><li>Configuration</li><li>Display comments on the frontend<ul><li>Installation of Strapi Comments Client</li><li>Usage of Strapi Comments Client</li></ul></li><li>Plugin settings</li><li>Manage comments</li><li>Full source code of the frontend</li><li>Conclusion</li></ul><h3 id=introduction>Introduction</h3><p>A comment system comes in very handy for pretty much any kind of website. In the JAMstack ecosystem, while it&rsquo;s ok to rely on third party solutions hosted on their own platform such as Disqus to enable comments, you usually want to keep your content and all the stuff related to it in the same admin dashboard.</p><p>In this article, I&rsquo;ll show you how to enable and manage comments for your content very easily using the <a href=https://npmjs.com/package/strapi-plugin-comment-manager>Comment Manager</a> plugin, and display them in your frontend application.</p><h3 id=prerequisites>Prerequisites</h3><p>You should have a basic understanding of the following.</p><ol><li>Basic knowledge of JavaScript</li><li>Basic knowledge of React (OPTIONAL)</li><li>Basic understanding of Strapi - <a href=https://docs.strapi.io/developer-docs/latest/getting-started/quick-start.html>get started here</a>.</li><li>Your Strapi V4 project setup</li></ol><h3 id=what-is-strapi-comment-manager>What is Strapi Comment Manager?</h3><p>Strapi Comment Manager is a plugin that enables comments for pretty much any kind of content. It allows your users to post comments and anyone can get the comments associated with a given slug.</p><p>With this plugin, admin users can view and manage very easily all the comments from the Strapi administration dashboard. Within the dashboard, you will be able to delete comments and subcomments and leave replies on comments.</p><h3 id=installation>Installation</h3><p>Once into the Strapi project root, you can install the plugin by running the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm install strapi-plugin-comment-manager
</span></span></code></pre></div><p>Next, build the project to see the new plugin in the dashboard with the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm run build
</span></span></code></pre></div><p>And that&rsquo;s it! If everything runs correctly, the plugin should now be installed.</p><h3 id=configuration>Configuration</h3><p>Now you need to enable some permissions so that the frontend can access the endpoints to post and fetch comments.</p><p>In your Strapi admin dashboard, head over to <strong>Settings</strong>, then over to <strong>Roles</strong> under <strong>Users & Permissions Plugin</strong>.</p><p>Let&rsquo;s first setup the Public API; click on <strong>Public</strong> and hit the dropdown button of <strong>Comment Manager</strong>.
Now check <strong>count</strong>, <strong>find</strong> and <strong>getPageSize</strong>, then hit the <strong>Save</strong> button.
Below is a screenshot of a proper configuration:</p><p><img src=https://paper-attachments.dropbox.com/s_F4A7EDBFDC720B4F2CC6430400928FC7049E297EEFCE8056A718FCD5F4317077_1640914179294_public-api.png alt></p><p>Now let&rsquo;s setup the Authenticated API. Go back to <strong>Roles</strong> and click on <strong>Authenticated</strong>.
Open the dropdown for <strong>Comment Manager</strong> and mark as checked the option <strong>create</strong> on both <strong>Comment</strong> and <strong>Subcomment</strong>.
Below is a screenshot of a proper configuration:</p><p><img src=https://paper-attachments.dropbox.com/s_F4A7EDBFDC720B4F2CC6430400928FC7049E297EEFCE8056A718FCD5F4317077_1640914092651_imagen_2021-12-30_212811.png alt></p><p>With this configuration, the frontend should now be able to make requests to get and post comments.</p><h3 id=display-comments-on-the-frontend>Display comments on the frontend</h3><p>The plugin exposes an API to get and post comments if you want to have fine-grained control over the workflow of your comments system and you can check the documentation on the <a href=https://npmjs.com/package/strapi-comments-client>package page</a>, but this plugin also comes with a purpose-built React component library that makes it super easy to get up and running without getting your hands dirty.</p><p>This components library is called <a href=https://npmjs.com/package/strapi-comments-client>strapi-comments-client</a>, fully supports typescript and it handles for you all of the complexity of fetching and posting comments and subcomments for every content ID that you pass to it.</p><h6 id=installation-of-strapi-comments-client>Installation of Strapi Comments Client</h6><p>You will need to have installed <strong>react ^17.0.2</strong>, <strong>react-dom ^17.0.2</strong> and <strong>react-router-dom ^5.2.0</strong>.</p><p>Inside of your React project, run this command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm install strapi-comments-client --save
</span></span></code></pre></div><h6 id=usage-of-strapi-comments-client>Usage of Strapi Comments Client</h6><p>Using this library is very easy!</p><p>This library exports three main components:</p><ul><li>CommentsProvider</li><li>Comments</li><li>CommentForm</li></ul><p>And you can import them this way:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>import</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>CommentsProvider</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>Comments</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>CommentForm</span>
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;strapi-comments-client&#34;</span>
</span></span></code></pre></div><p>All you have to do is wrap your <strong>App</strong> component into the <strong>CommentsProvider</strong> component.
Then you will be able to place anywhere in your app the <strong>Comments</strong> component to render a list of comments for a given content ID and the <strong>CommentForm</strong> component to render a form to post comments.</p><p>For example, this could be your index.js or main.js file:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;react&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>ReactDOM</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#39;react-dom&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// The address of your strapi backend instance
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>STRAPI</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;http://localhost:1337&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>ReactDOM</span>.<span style=color:#a6e22e>render</span>(
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>React.StrictMode</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>CommentsProvider</span> <span style=color:#a6e22e>apiURL</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>STRAPI</span>}&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>App</span> /&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>CommentsProvider</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>React.StrictMode</span>&gt;,
</span></span><span style=display:flex><span>  document.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>&#39;root&#39;</span>)
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p>Where <strong>apiURL</strong> is the URL of your running Strapi application, and this property is <strong>required</strong>.</p><p>This way, the comments provider will do all the magic of fetching and posting comments for you!</p><p>This library also exports an utility <strong>React.Context</strong> to update some of the parameters for fetching and posting comments:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>CommentsConfigContext</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;strapi-comments-client&#34;</span>
</span></span></code></pre></div><p>This <strong>CommentsConfigContext</strong> exposes two setter functions: <strong>setUser</strong> and <strong>setContentID</strong></p><p>With <strong>setContentID</strong> you can load the comments for a given content and post comments to it. It receives a single parameter of type <strong>string</strong> and must be URLized, i.e. no spaces.</p><p>With <strong>setUser</strong> you can set the credentials of a given user to authorize the posting of comments. It receives a single parameter of type <strong>IUser</strong>, with the following <strong>Typescript interface</strong>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>IUser</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>username</span>: <span style=color:#66d9ef>string</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>email</span>: <span style=color:#66d9ef>string</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>id</span>: <span style=color:#66d9ef>string</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>token</span>: <span style=color:#66d9ef>string</span> <span style=color:#75715e>// This is a JWT
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>It&rsquo;s a little confusing but we&rsquo;ll see how to use it in a component:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>App</span> <span style=color:#f92672>=</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>setUser</span>, <span style=color:#a6e22e>setContentID</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>useContext</span>(<span style=color:#a6e22e>CommentsConfigContext</span>)
</span></span><span style=display:flex><span>  <span style=color:#75715e>// The following data should come from Strapi Users and Permissions Plugin
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// for authenticated requests
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>user</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>username</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;John Doe&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>email</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;jhohndoe@gmail.com&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>id</span>: <span style=color:#66d9ef>5</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>token</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;this_should_be_a_JWT&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>user</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>setUser</span>(<span style=color:#a6e22e>user</span>)
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>setContentID</span>(<span style=color:#e6db74>&#34;sample-content-1&#34;</span>) <span style=color:#75715e>// Load comments for this content
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    &lt;&gt;
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        <span style=color:#f92672>!</span><span style=color:#a6e22e>user</span> <span style=color:#f92672>&amp;&amp;</span> &lt;<span style=color:#f92672>Login</span> /&gt;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>CommentForm</span> /&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>Comments</span> /&gt;
</span></span><span style=display:flex><span>    &lt;/&gt;
</span></span><span style=display:flex><span>  )
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>And that&rsquo;s it!</p><p>After setting the content ID through <strong>setContentID</strong>, <strong>CommentsProvider</strong> will start loading the comments for the given content ID and the <strong>CommentForm</strong> will render an input to post comments related to the given content ID <strong>if</strong> there is a user. Otherwise, it will display the message <strong>Login to post a comment</strong>.</p><p>Here&rsquo;s how the interface looks like so far:</p><p><img src=https://paper-attachments.dropbox.com/s_F4A7EDBFDC720B4F2CC6430400928FC7049E297EEFCE8056A718FCD5F4317077_1640914973004_comment.PNG alt></p><p>There&rsquo;s also a button to <strong>Leave a reply</strong>, which will open a form to post a subcomment associated with the parent comment.</p><p>This library exports one more component: <strong>ErrorBox</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>ErrorBox</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;strapi-comments-client&#34;</span>
</span></span></code></pre></div><p>.It&rsquo;s useful if you&rsquo;d like to display error messages when things go wrong fetching or posting comments.</p><p>You can place this component wherever you want, for example in between the <strong>CommentForm</strong> and the <strong>Comments</strong> components.</p><p>If you&rsquo;re wondering how this error box looks like, here you have a sample:</p><p><img src=https://paper-attachments.dropbox.com/s_F4A7EDBFDC720B4F2CC6430400928FC7049E297EEFCE8056A718FCD5F4317077_1640915088338_error.PNG alt></p><h3 id=general-settings>General settings</h3><p>You can customize the page size, i.e. specify how many comments are returned at once.</p><p>In the Strapi admin panel, head over to <strong>Settings</strong>, then select <strong>Pagination</strong> under <strong>Comment Manager Plugin</strong>.</p><p>Here you&rsquo;ll find an input to set the page size, which defaults to 10.</p><p><img src=https://paper-attachments.dropbox.com/s_F4A7EDBFDC720B4F2CC6430400928FC7049E297EEFCE8056A718FCD5F4317077_1640915323050_imagen_2021-12-30_214840.png alt></p><h3 id=manage-comments>Manage comments</h3><p>Once you&rsquo;ve got the plugin up an running, as users start to post comments, you can manage and reply to them as admin from the Comment Manager section of the left sidebar in the Strapi admin dashboard.</p><p>Here you can see two tabs: one for the latest comments and one for comments grouped by content ID.</p><p><img src=https://paper-attachments.dropbox.com/s_F4A7EDBFDC720B4F2CC6430400928FC7049E297EEFCE8056A718FCD5F4317077_1640915958244_latest-comments.png alt></p><p><img src=https://paper-attachments.dropbox.com/s_F4A7EDBFDC720B4F2CC6430400928FC7049E297EEFCE8056A718FCD5F4317077_1640915483765_grouped-comments.png alt></p><p>In both of them you can delete comments and subcomments as well as leave replies.</p><h3 id=example-project>Example project</h3><p>You can find a full working example of a React App using the Strapi Comments Client Library in <a href=https://github.com/luisguve/strapi-comments-client-example>this repo</a></p><h3 id=conclusion>Conclusion</h3><p>With this plugin you can enable and manage comments for any content with little effort and even use a component library to display the comments in your frontend application made with React.</p><p>And that&rsquo;s it! The features are pretty basic at the moment but if there&rsquo;s interest, I&rsquo;m willing to work on more features as well as improve the UI/UX.</p></div></article><div class=row></div><div class=row><ul class=pager><li><a class=next href=https://luisguve.github.io/plugins/strapi-plugin-ratings/>&#171; Strapi Plugin Ratings</a></li><li><a class=previous href=https://luisguve.github.io/plugins/strapi-plugin-comment-manager/>Strapi Plugin Comment Manager &#187;</a></li></ul></div></div><div class="col-md-4 mt20"><div class=post-img><img width=600 src=https://luisguve.github.io/images/strapilogo.jpg alt=webjeda></div><div class="mt10 recent"><h2>Recent articles</h2><ul><li><p><a href=https://luisguve.github.io/plugins/strapi-plugin-ratings/>Strapi Plugin Ratings</a><small>&nbsp;&nbsp;July 30, 2022</small></p></li><li><p><a href=https://luisguve.github.io/tutorials/how-to-enable-and-manage-comments-in-your-strapi-application/>How To Enable And Manage Comments In Your Strapi Application</a><small>&nbsp;&nbsp;July 29, 2022</small></p></li><li><p><a href=https://luisguve.github.io/plugins/strapi-plugin-comment-manager/>Strapi Plugin Comment Manager</a><small>&nbsp;&nbsp;July 29, 2022</small></p></li></ul></div><br></div></div></div></div><footer><div class=container><div class="row p20"><div class="col-md-4 text-center mt25">All rights reserved by <a target=_blank href=https://github.com/luisguve>Luis Villegas' Portfolio</a></div><div class="col-md-4 text-center mt25"><a target=_blank href=https://bool.netlify.com><img src=https://img.shields.io/badge/Built%20by-bool-brightgreen.svg alt=bool></a></div><div class="col-md-4 text-center mt25"><a target=_blank href=https://github.com/luisguve><li class="social github"><i class="fa fa-github-square"></i></li></a><a target=_blank href=mailto:luisguveal@gmail.com><li class="social email"><i class="fa fa-envelope"></i></li></a></div></div></div></footer><script src=https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js></script>
<script src=https://luisguve.github.io//js/bootstrap.min.js></script>
<script async defer src=https://buttons.github.io/buttons.js></script>
<script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","","auto"),ga("send","pageview")</script></body></html>