














[{"categories":["Projects"],"contents":"In this post I’m going to share my experience on building a SaaS using the headless CMS Strapi as the Backend, React Native and other technologies.\nOutline Introduction What is SaaS? The problem What is Strapi? Developing features in Strapi The frontend: How to get content Conclusion Landing Page Introduction Very often, developers, product and project managers, testers and pretty much the entire team share their ideas to decide what language and which framework they\u0026rsquo;ll use to build their next project. Some considerations must be taken into account, from which in my opinion there are three that are the most important:\nDeveloper experience and ease of use Does the language and framework chosen provide a good developer experience? Is the langauge the same for the backend and frontend?\nDeadlines Is there a deadline to finish the project? if so, there is a good chance to finish the project on time if the team chooses the language they have more experience in.\nMaintainability As there will be usually more than one person working on the same part at the same time, if everything is kept organised, the whole development process will be frictionless.\nWith that in mind, developers and project managers will have a better insight on which language/framework to use.\nOther aspects should also be considered such as what the data structure will look like.\nIn my case, as it is usual, the backend of my project needs a database for users and their roles among other entities and their relations and a dashboard to allow admins to manage the data, and I was lucky to find out Strapi, as it includes a lot of these features out of the box with one single line of command to get started.\nWhat is SaaS? SaaS stands for Software-as-a-Service and it just means that a software is provided as a service in the cloud and it gives a solution to a specific problem, for which the users are willing to pay either monthly or annual subscription.\nThe problem Before starting to write a single line of code, it is generally a good idea to think about the problem, it\u0026rsquo;s limitations and whether or not it has already been solved by someone else (AKA competitors).\nThe problem I was looking into had to do with the way in which public and private transportation companies manage their routes, drivers and users. After a little bit of research, I could only find one platform that provides a similiar solution but for their own company.\nSo the platform I built needed the following content types:\nOrganizations to group routes, drivers and users Routes Two user roles: drivers and users (passengers) As I said before, Strapi makes the creation of these content types and the relationships between them really easy, but let\u0026rsquo;s first see what is Strapi and how it turns the API development into a satisfactory and fun experience.\nWhat is Strapi? Strapi is an open source headless CMS that allows developers to build complete RESTful APIs in just a couple of days instead of months. It includes a lot of useful features as plugins out of the box. Users and Roles management, Media library and an interface to create, view, edit and delete content are just some of them.\nRegarding the API, how does it makes the development faster?\nFirst of all, it enforces a specific folder structure, which helps to keep everything well organised and clean.\nSecondly, all database schemas are generated automatically and queries are made in JSON format, which really saves a lot of time.\nLastly, we can add more features to our Strapi application very easily via plugins from the marketplace.\nIt\u0026rsquo;s also worth noting that Strapi is a self-hosted CMS, which means that we can host it in whatever cloud platform we want, as well as test it locally in our computers before deploying it to the cloud.\nDeveloping features in Strapi Creating and configuring endpoints in Strapi is as straightforward as declaring a JSON in a single file:\nCreating controllers is straightforward as well:\nEvery controller gets all the data related to the request in the ctx parameter and it\u0026rsquo;s also used to send the response. This keeps everything in one place and really helps to improve the readability.\nOnce the API endpoints are defined, the next step is to enable the permissions for the specific user roles to have access to these endpoints:\nThe frontend: how to get content Since Strapi is a headless CMS, it\u0026rsquo;ll only provide content through the API. That means that the content can be consumed from anywhere. In our case, this content will be used in two applications: one for the organization owners and one for the users and drivers.\nThe application for the organization owners is a dashboard where administrators can create organizations, routes, accept drivers and users in the organization and assign routes to drivers. This is just a React Application:\nThe application for drivers and users is a mobile application built in React Native. Firebase was used to synchronise geolocation data in real time between drivers and users and display this information in a Map from Google Maps:\nConclusion Using a CMS as the backend can make the development a lot faster than building the API from scratch and with Strapi this is specially true. Furthermore, this becomes more important when building a brand-new product, as it\u0026rsquo;s usually recommended to launch as soon as possible to gather feedback from the users and validate the idea.\nProject landing page: https://rutieri.netlify.app\n","image":"//localhost:1313/images/post/03.webp","permalink":"//localhost:1313/es/blogs/how-i-built-a-saas-on-top-of-strapi/","tags":["Strapi","React Native","Typescript"],"title":"How I Built A SaaS On Top Of Strapi, And Why You Should Too"},{"categories":["Tutorial"],"contents":"Enable User Reviews in a Strapi application and display them in the frontend with React\nOutline Introduction Prerequisites What is Strapi Ratings? Installation Configuration Display user reviews on the frontend Plugin settings Manage user reviews Full source code of the frontend Conclusion Introduction Ratings systems have become a crucial part of any website with ecommerce capabilites, as they allow the users to post reviews on the items they purchase and publish their opinion to the public. A couple of reviews can make the difference between pressing the “Buy” button and moving on to the next website in the Google search results.\nIn this article, I\u0026rsquo;ll show you how to enable and manage user reviews for your content very easily using the Ratings plugin, and display them in your frontend application.\nPrerequisites First of all, you need to have a basic understanding of the following.\nBasic knowledge of JavaScript Basic knowledge of React (OPTIONAL) Basic understanding of Strapi - get started here. Your Strapi V4 project setup What is Strapi Ratings? Strapi Ratings is a plugin that gives your Strapi application the ability to manage ratings for pretty much any kind of content. It allows your users to post reviews and anyone can get the reviews associated with a given slug.\nWith this plugin, admin users can view and manage very easily all the reviews from the Strapi administration dashboard. Within the dashboard, you will be able to see reviews related to content slugs as well as delete reviews.\nInstallation Once into the Strapi project root, you can install the plugin by running the following command:\nnpm install strapi-plugin-ratings Next, build the project to see the new plugin in the dashboard with the following command:\nnpm run build And that\u0026rsquo;s it! If everything runs correctly, the plugin should now be installed.\nConfiguration Now you need to enable some permissions so that the frontend can access the endpoints to post and fetch reviews.\nIn your Strapi admin dashboard, head over to Settings, then over to Roles under Users \u0026amp; Permissions Plugin.\nLet\u0026rsquo;s first setup the Public API; click on Public and hit the dropdown button of Ratings. Now check count, find, getPageSize and getStats, then hit the Save button. Below is a screenshot of a proper configuration:\nNow let\u0026rsquo;s setup the Authenticated API. Go back to Roles and click on Authenticated. Open the dropdown for Ratings and mark as checked the options create, find and getUserReview. Below is a screenshot of a proper configuration:\nWith this configuration, the frontend should now be able to make requests to get and post user reviews.\nDisplay use reviews on the frontend The plugin exposes an API to get and post reviews if you want to have fine-grained control over the workflow of your ratings system and you can check the documentation on the package page, but this plugin also comes with a purpose-built React component library that makes it super easy to get up and running without getting your hands dirty.\nThis components library is called strapi-ratings-client, fully supports typescript and it takes care of all the complexity of fetching and posting user reviews for every content ID that you pass to it.\nInstallation of Strapi Ratings Client You will need to have installed react ^17.0.2, react-dom ^17.0.2, bootstrap ^5.1.3 and @popperjs/core^2.11.2\nInside of your React project, run this command:\nnpm install strapi-ratings-client --save Usage of Strapi Ratings Client Using this library is very easy!\nThis library exports three main components:\nReviewsProvider Reviews ReviewForm And you can import them this way:\nimport { ReviewsProvider, Reviews, ReviewForm } from \u0026#34;strapi-ratings-client\u0026#34; All you have to do is wrap your App component into the ReviewsProvider component. Then you will be able to place anywhere in your app the Reviews component to render a list of user reviews for a given content ID and the ReviewForm component to render a form to allow your users to post reviews.\nFor example, this could be your index.js or main.js file:\nimport React from \u0026#39;react\u0026#39; import ReactDOM from \u0026#39;react-dom\u0026#39; // The address of your strapi backend instance const STRAPI = \u0026#34;http://localhost:1337\u0026#34; ReactDOM.render( \u0026lt;React.StrictMode\u0026gt; \u0026lt;ReviewsProvider apiURL={STRAPI}\u0026gt; \u0026lt;App /\u0026gt; \u0026lt;/ReviewsProvider\u0026gt; \u0026lt;/React.StrictMode\u0026gt;, document.getElementById(\u0026#39;root\u0026#39;) ) Where apiURL is the URL of your running Strapi application, and this property is required.\nThis way, the ratings provider will do all the magic of fetching and posting comments for you!\nThis library also exports an utility React.Context to update some of the parameters for fetching and posting reviews:\nimport { ReviewsConfigContext } from \u0026#34;strapi-ratings-client\u0026#34; This ReviewsConfigContext exposes three setter functions: setUser, setContentID and setCanPostReview.\nWith setContentID you can load the ratings for a given content and post reviews to it. It receives a single parameter of type string and must be URLized, i.e. no spaces.\nWith setUser you can set the credentials of a given user to authorize the posting of reviews. It receives a single parameter of type IUser, with the following Typescript interface:\ninterface IUser { username: string, email: string, id: string, token: string // This is a JWT } With setCanPostReview, you can enable the user to post a review on the given content. This is useful for when you only allow a user to post a review after they purchase the product.\nIt\u0026rsquo;s a little confusing but we\u0026rsquo;ll see how to use it in a component:\nconst App = () =\u0026gt; { const { setUser, setContentID, setCanPostReview } = useContext(ReviewsConfigContext) // The following data should come from Strapi Users and Permissions Plugin // for authenticated requests. const user = { username: \u0026#34;John Doe\u0026#34;, email: \u0026#34;jhohndoe@gmail.com\u0026#34;, id: 5, token: \u0026#34;this_should_be_a_JWT\u0026#34; } if (user) { setUser(user) } setContentID(\u0026#34;sample-content-1\u0026#34;) // Load reviews for this content setCanPostReview(true) // Allow this user to post a review return ( \u0026lt;\u0026gt; { !user \u0026amp;\u0026amp; \u0026lt;Login /\u0026gt; } \u0026lt;ReviewForm /\u0026gt; \u0026lt;Reviews /\u0026gt; \u0026lt;/\u0026gt; ) } And that\u0026rsquo;s it!\nAfter setting the content ID through setContentID, ReviewsProvider will start loading the reviews for the given content ID and the ReviewForm will render an input to post a user review related to the given content ID if there is a user and he’s allowed to post a review. Otherwise, it will display the message Login to post a review or nothing at all if the user is not allowed to post a review.\nHere\u0026rsquo;s how the interface looks like so far:\nThis library exports one more component: ErrorBox\nimport { ErrorBox } from \u0026#34;strapi-ratings-client\u0026#34; .It\u0026rsquo;s useful for when you\u0026rsquo;d like to display error messages when things go wrong fetching or posting reviews.\nYou can place this component wherever you want, for example in between the ReviewForm and the Reviews components.\nIf you\u0026rsquo;re wondering how this error box looks like, here‘s a screenshot:\nGeneral settings You can customize the page size, i.e. specify how many user reviews are showed at once.\nIn the Strapi admin panel, head over to Settings, then select Pagination under Ratings Plugin.\nHere you\u0026rsquo;ll find an input to set the page size, which defaults to 10.\nManage reviews Once you\u0026rsquo;ve got the plugin up an running, as users start to post reviews, you can view them from within the Ratings section of the left sidebar in the Strapi admin dashboard.\nHere you can see two tabs: one for the latest reviews and one for reviews grouped by content ID.\nIn both of them you can delete unwanted reviews.\nExample project You can find a full working example of a React App using the Strapi Ratings Client Library in this repo: https://github.com/luisguve/strapi-ratings-client-example\nConclusion With this plugin you can enable and manage user reviews for any content with little effort and even use a library of components styled with Bootstrap to display the user reviews in your frontend.\nAnd that\u0026rsquo;s it! The features are pretty basic at the moment but if there\u0026rsquo;s interest, I\u0026rsquo;m willing to work on more features as well as improve the UI/UX.\n","image":"//localhost:1313/images/post/tutorial-ratings.webp","permalink":"//localhost:1313/es/blogs/how-to-enable-and-manage-user-reviews-in-your-strapi-application/","tags":["Strapi","Strapi tutorials"],"title":"How To Enable And Manage User Reviews In Your Strapi Application"},{"categories":["Documentation"],"contents":"Ratings is a Strapi plugin that allows your users to post reviews.\nEnable and manage user reviews for your content very easily!\nRequirements You should have installed an instance of Strapi v4.x.x\nInstallation Run the following command in your project root:\nnpm install strapi-plugin-ratings Then, rebuild the admin dashboard using the following command\nnpm run build Configurarion For your frontend to have access to the API, enable the following permissions for Ratings from Users \u0026amp; Permissions Plugin on your project settings:\nFor public, enable: count, find, getPageSize and getStats.\nFor authenticated, enable create, find and getUserReview.\nDisplay user reviews on the frontend Reviews can be displayed in the frontend in two ways:\nUsing the React components library strapi-ratings-client (recommended) Build your custom frontend using the API endpoints, described as follows: API There are some Typescript interfaces that will help to get an idea of the data structures.\nReviews: interface IReview { id: number, createdAt: string, comment: string | null, author: IAuthor | null, score: number, } Authors: interface IAuthor { username: string, email: string, id: number } Content Stats interface IStats { averageScore: number; reviewsCount: number | null; } The following endpoints are exposed to fetch and post reviews:\nGet reviews for a content ID Method: GET\nPath: /api/ratings/reviews/:slug\nOptional query parameters: start, ignoreCount\nReturns:\n{ reviewsCount: number, averageScore: number, userReview: IReview | null, reviews: IReview[] } The parameter start indicates how many reviews to skip. This is for pagination purposes.\nThe parameter ignoreCount indicates whether or not to return the total number of reviews associated with the given slug.\nGet review stats for a content ID Method: GET\nPath: /api/ratings/reviews/:slug/stats\nReturns:\n{ averageScore: number, reviewsCount: number | null } Get the number of reviews associated with a given content ID Method: GET\nPath: /api/ratings/reviews/:slug/count\nReturns:\n{ count: number } Post a review Method: POST\nPath: /api/ratings/reviews/:slug\nAuthentication: Bearer token\nPayload:\n{ content: string } Returns:\n{ id: number } By default, every authenticated user can post reviews on any content.\nIn order to customize this behavior, e.g. allowing or disallowing a user from posting reviews, you must extend the service userCanPostReview from whithin register function in ./src/index.js. For example:\nstrapi.service(\u0026#34;plugin::ratings.review\u0026#34;).userCanPostReview = async (user, slug) =\u0026gt; { /* Here you will check whether or not the user is allowed to post a review on this content ID and return either true or false. */ return true } Notice that userCanPostReview will receive two parameters: the user from Users \u0026amp; Permissions Plugin, containing it\u0026rsquo;s id, username, confirmed, etc., and the slug, which is a string and refers to the content ID which the review is being posted on.\nIn case this function returns false, the response of the endpoint will be 403 (forbidden) with the text User cannot post a review on this content.\nGet the page size Method: GET\nPath: /api/ratings/page-size\nReturns:\n{ pageSize: number } General settings The plugin allows to set how many reviews are returned per page by going to the Pagination section under Ratings Plugin of the Settings section.\nThe default page size is 10.\nManagement of reviews Admin users are able to delete reviews from within the plugin page of the Strapi admin dashboard.\nThe plugin interface has two tabs: one for the latest reviews and one for reviews by content ID.\nRoadmap and future plans The plugin is pretty basic but it can be improved with more features and a better UI/UX. Collaborations and suggestions are very welcome.\n","image":"//localhost:1313/images/post/ratings.webp","permalink":"//localhost:1313/es/blogs/strapi-plugin-ratings/","tags":["Strapi","Strapi plugins"],"title":"Strapi Plugin Ratings"}]